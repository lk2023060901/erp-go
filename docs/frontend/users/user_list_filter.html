<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·åˆ—è¡¨è¿‡æ»¤å™¨æ¼”ç¤º</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            overflow: hidden;
        }
        
        .header {
            padding: 24px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .title {
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }
        
        .toolbar {
            display: flex;
            gap: 12px;
        }
        
        .btn {
            padding: 8px 16px;
            border: 1px solid #d1d5db;
            background: #fff;
            color: #374151;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }
        
        .btn:hover {
            border-color: #6366f1;
            background: #f8fafc;
        }
        
        .btn-primary {
            background: #6366f1;
            color: white;
            border-color: #6366f1;
        }
        
        .btn-primary:hover {
            background: #5856eb;
        }
        
        /* è¿‡æ»¤å™¨é¢æ¿ */
        .filter-panel {
            display: none;
            background: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
            padding: 20px 24px;
        }
        
        .filter-panel.active {
            display: block;
        }
        
        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .filter-title {
            font-size: 16px;
            font-weight: 500;
            color: #1f2937;
        }
        
        .filter-actions {
            display: flex;
            gap: 8px;
        }
        
        .filter-content {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .filter-item {
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 200px;
        }
        
        .filter-item label {
            font-size: 14px;
            color: #374151;
            width: 80px;
            flex-shrink: 0;
        }
        
        .filter-item select,
        .filter-item input {
            flex: 1;
            padding: 6px 12px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .filter-condition {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 16px;
            margin-bottom: 12px;
        }
        
        .condition-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .condition-logic {
            font-size: 12px;
            color: #6b7280;
            background: #f3f4f6;
            padding: 2px 8px;
            border-radius: 4px;
        }
        
        .remove-condition {
            color: #ef4444;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
        }
        
        .remove-condition:hover {
            background: #fef2f2;
        }
        
        .add-condition {
            border: 2px dashed #d1d5db;
            padding: 16px;
            text-align: center;
            color: #6b7280;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
        }
        
        .add-condition:hover {
            border-color: #6366f1;
            color: #6366f1;
            background: #f8fafc;
        }
        
        /* è‡ªå®šä¹‰è¿‡æ»¤å™¨ç®¡ç† */
        .saved-filters {
            margin-bottom: 20px;
        }
        
        .saved-filters-title {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 12px;
        }
        
        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .filter-tag {
            background: #eff6ff;
            color: #1d4ed8;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            border: 1px solid #dbeafe;
        }
        
        .filter-tag:hover {
            background: #dbeafe;
        }
        
        .filter-tag.active {
            background: #1d4ed8;
            color: white;
        }
        
        .filter-tag .remove {
            color: #6b7280;
            cursor: pointer;
            margin-left: 4px;
        }
        
        .filter-tag.active .remove {
            color: #bfdbfe;
        }
        
        /* è¡¨æ ¼æ ·å¼ */
        .table-container {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }
        
        th {
            background: #fafafa;
            font-weight: 500;
            color: #374151;
        }
        
        .status-tag {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-active {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-inactive {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .role-tag {
            background: #e0e7ff;
            color: #3730a3;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
        }
        
        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 8px;
            padding: 24px;
            width: 90%;
            max-width: 400px;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-size: 14px;
            color: #374151;
        }
        
        .form-group input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <div class="header">
            <h1 class="title">ç”¨æˆ·ç®¡ç†</h1>
            <div class="toolbar">
                <button class="btn" onclick="toggleFilter()">
                    <span>ğŸ”</span> è¿‡æ»¤å™¨
                </button>
                <button class="btn" onclick="showSortModal()">
                    <span>â†•ï¸</span> è‡ªå®šä¹‰æ’åº
                </button>
                <button class="btn">
                    <span>ğŸ“¤</span> å¯¼å‡º
                </button>
                <button class="btn btn-primary">
                    <span>â•</span> åˆ›å»ºç”¨æˆ·
                </button>
            </div>
        </div>
        
        <!-- è¿‡æ»¤å™¨é¢æ¿ -->
        <div class="filter-panel" id="filterPanel">
            <div class="filter-header">
                <div class="filter-title">è¿‡æ»¤å™¨è®¾ç½®</div>
                <div class="filter-actions">
                    <button class="btn" onclick="saveFilter()">ä¿å­˜è¿‡æ»¤å™¨</button>
                    <button class="btn" onclick="clearFilters()">æ¸…ç©ºè¿‡æ»¤å™¨</button>
                    <button class="btn" onclick="applyFilters()">åº”ç”¨è¿‡æ»¤å™¨</button>
                </div>
            </div>
            
            <!-- å·²ä¿å­˜çš„è¿‡æ»¤å™¨ -->
            <div class="saved-filters">
                <div class="saved-filters-title">å·²ä¿å­˜çš„è¿‡æ»¤å™¨</div>
                <div class="filter-tags" id="savedFilters">
                    <div class="filter-tag" onclick="loadFilter('active-users')">
                        å¯ç”¨ç”¨æˆ·
                        <span class="remove" onclick="event.stopPropagation(); deleteFilter('active-users')">Ã—</span>
                    </div>
                    <div class="filter-tag" onclick="loadFilter('admin-roles')">
                        ç®¡ç†å‘˜è§’è‰²
                        <span class="remove" onclick="event.stopPropagation(); deleteFilter('admin-roles')">Ã—</span>
                    </div>
                    <div class="filter-tag" onclick="loadFilter('recent-users')">
                        è¿‘æœŸåˆ›å»ºç”¨æˆ·
                        <span class="remove" onclick="event.stopPropagation(); deleteFilter('recent-users')">Ã—</span>
                    </div>
                </div>
            </div>
            
            <!-- è¿‡æ»¤æ¡ä»¶ -->
            <div id="filterConditions">
                <div class="filter-condition">
                    <div class="condition-header">
                        <span class="condition-logic">AND</span>
                        <span class="remove-condition" onclick="removeCondition(this)">âœ•</span>
                    </div>
                    <div class="filter-content">
                        <div class="filter-item">
                            <label>å­—æ®µ</label>
                            <select>
                                <option value="name">ç”¨æˆ·å</option>
                                <option value="email">é‚®ç®±</option>
                                <option value="role">è§’è‰²</option>
                                <option value="status">çŠ¶æ€</option>
                                <option value="created_at">åˆ›å»ºæ—¶é—´</option>
                                <option value="last_login">æœ€åç™»å½•</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label>æ¡ä»¶</label>
                            <select>
                                <option value="equals">ç­‰äº</option>
                                <option value="contains">åŒ…å«</option>
                                <option value="starts_with">å¼€å¤´æ˜¯</option>
                                <option value="ends_with">ç»“å°¾æ˜¯</option>
                                <option value="greater_than">å¤§äº</option>
                                <option value="less_than">å°äº</option>
                                <option value="between">ä»‹äº</option>
                                <option value="in">å±äº</option>
                                <option value="not_in">ä¸å±äº</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label>å€¼</label>
                            <input type="text" placeholder="è¯·è¾“å…¥ç­›é€‰å€¼">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æ·»åŠ æ¡ä»¶ -->
            <div class="add-condition" onclick="addCondition()">
                <span>+ æ·»åŠ ç­›é€‰æ¡ä»¶</span>
            </div>
        </div>
        
        <!-- ç”¨æˆ·åˆ—è¡¨è¡¨æ ¼ -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th><input type="checkbox"></th>
                        <th>ç”¨æˆ·å</th>
                        <th>é‚®ç®±</th>
                        <th>è§’è‰²</th>
                        <th>çŠ¶æ€</th>
                        <th>æœ€åç™»å½•</th>
                        <th>åˆ›å»ºæ—¶é—´</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="userTable">
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>admin</td>
                        <td>admin@example.com</td>
                        <td><span class="role-tag">è¶…çº§ç®¡ç†å‘˜</span></td>
                        <td><span class="status-tag status-active">å¯ç”¨</span></td>
                        <td>2024-01-15 14:30</td>
                        <td>2024-01-01 10:00</td>
                        <td><button class="btn">ç¼–è¾‘</button></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>user001</td>
                        <td>user001@example.com</td>
                        <td><span class="role-tag">æ™®é€šç”¨æˆ·</span></td>
                        <td><span class="status-tag status-active">å¯ç”¨</span></td>
                        <td>2024-01-14 09:15</td>
                        <td>2024-01-02 11:30</td>
                        <td><button class="btn">ç¼–è¾‘</button></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>user002</td>
                        <td>user002@example.com</td>
                        <td><span class="role-tag">æ™®é€šç”¨æˆ·</span></td>
                        <td><span class="status-tag status-inactive">ç¦ç”¨</span></td>
                        <td>2024-01-10 16:45</td>
                        <td>2024-01-03 15:20</td>
                        <td><button class="btn">ç¼–è¾‘</button></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>manager</td>
                        <td>manager@example.com</td>
                        <td><span class="role-tag">ç®¡ç†å‘˜</span></td>
                        <td><span class="status-tag status-active">å¯ç”¨</span></td>
                        <td>2024-01-13 13:20</td>
                        <td>2024-01-05 08:45</td>
                        <td><button class="btn">ç¼–è¾‘</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- ä¿å­˜è¿‡æ»¤å™¨æ¨¡æ€æ¡† -->
    <div class="modal" id="saveFilterModal">
        <div class="modal-content">
            <div class="modal-title">ä¿å­˜è¿‡æ»¤å™¨</div>
            <div class="form-group">
                <label>è¿‡æ»¤å™¨åç§°</label>
                <input type="text" id="filterNameInput" placeholder="è¯·è¾“å…¥è¿‡æ»¤å™¨åç§°">
            </div>
            <div class="modal-actions">
                <button class="btn" onclick="closeSaveFilterModal()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="confirmSaveFilter()">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <script>
        let filterVisible = false;
        let filterConditions = 1;
        
        // åˆ‡æ¢è¿‡æ»¤å™¨æ˜¾ç¤º
        function toggleFilter() {
            const panel = document.getElementById('filterPanel');
            filterVisible = !filterVisible;
            panel.classList.toggle('active', filterVisible);
        }
        
        // æ·»åŠ è¿‡æ»¤æ¡ä»¶
        function addCondition() {
            const container = document.getElementById('filterConditions');
            const newCondition = document.createElement('div');
            newCondition.className = 'filter-condition';
            newCondition.innerHTML = `
                <div class="condition-header">
                    <span class="condition-logic">AND</span>
                    <span class="remove-condition" onclick="removeCondition(this)">âœ•</span>
                </div>
                <div class="filter-content">
                    <div class="filter-item">
                        <label>å­—æ®µ</label>
                        <select>
                            <option value="name">ç”¨æˆ·å</option>
                            <option value="email">é‚®ç®±</option>
                            <option value="role">è§’è‰²</option>
                            <option value="status">çŠ¶æ€</option>
                            <option value="created_at">åˆ›å»ºæ—¶é—´</option>
                            <option value="last_login">æœ€åç™»å½•</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label>æ¡ä»¶</label>
                        <select>
                            <option value="equals">ç­‰äº</option>
                            <option value="contains">åŒ…å«</option>
                            <option value="starts_with">å¼€å¤´æ˜¯</option>
                            <option value="ends_with">ç»“å°¾æ˜¯</option>
                            <option value="greater_than">å¤§äº</option>
                            <option value="less_than">å°äº</option>
                            <option value="between">ä»‹äº</option>
                            <option value="in">å±äº</option>
                            <option value="not_in">ä¸å±äº</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label>å€¼</label>
                        <input type="text" placeholder="è¯·è¾“å…¥ç­›é€‰å€¼">
                    </div>
                </div>
            `;
            container.appendChild(newCondition);
            filterConditions++;
        }
        
        // ç§»é™¤è¿‡æ»¤æ¡ä»¶
        function removeCondition(element) {
            if (filterConditions > 1) {
                element.closest('.filter-condition').remove();
                filterConditions--;
            } else {
                alert('è‡³å°‘éœ€è¦ä¿ç•™ä¸€ä¸ªè¿‡æ»¤æ¡ä»¶');
            }
        }
        
        // æ¸…ç©ºè¿‡æ»¤å™¨
        function clearFilters() {
            const container = document.getElementById('filterConditions');
            container.innerHTML = `
                <div class="filter-condition">
                    <div class="condition-header">
                        <span class="condition-logic">AND</span>
                        <span class="remove-condition" onclick="removeCondition(this)">âœ•</span>
                    </div>
                    <div class="filter-content">
                        <div class="filter-item">
                            <label>å­—æ®µ</label>
                            <select>
                                <option value="name">ç”¨æˆ·å</option>
                                <option value="email">é‚®ç®±</option>
                                <option value="role">è§’è‰²</option>
                                <option value="status">çŠ¶æ€</option>
                                <option value="created_at">åˆ›å»ºæ—¶é—´</option>
                                <option value="last_login">æœ€åç™»å½•</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label>æ¡ä»¶</label>
                            <select>
                                <option value="equals">ç­‰äº</option>
                                <option value="contains">åŒ…å«</option>
                                <option value="starts_with">å¼€å¤´æ˜¯</option>
                                <option value="ends_with">ç»“å°¾æ˜¯</option>
                                <option value="greater_than">å¤§äº</option>
                                <option value="less_than">å°äº</option>
                                <option value="between">ä»‹äº</option>
                                <option value="in">å±äº</option>
                                <option value="not_in">ä¸å±äº</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label>å€¼</label>
                            <input type="text" placeholder="è¯·è¾“å…¥ç­›é€‰å€¼">
                        </div>
                    </div>
                </div>
            `;
            filterConditions = 1;
            
            // æ¸…é™¤å·²ä¿å­˜è¿‡æ»¤å™¨çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.classList.remove('active');
            });
        }
        
        // åº”ç”¨è¿‡æ»¤å™¨
        function applyFilters() {
            alert('è¿‡æ»¤å™¨å·²åº”ç”¨ï¼\nè¿™é‡Œä¼šæ ¹æ®è®¾ç½®çš„æ¡ä»¶è¿‡æ»¤ç”¨æˆ·åˆ—è¡¨ã€‚');
        }
        
        // ä¿å­˜è¿‡æ»¤å™¨
        function saveFilter() {
            document.getElementById('saveFilterModal').classList.add('active');
        }
        
        // å…³é—­ä¿å­˜è¿‡æ»¤å™¨æ¨¡æ€æ¡†
        function closeSaveFilterModal() {
            document.getElementById('saveFilterModal').classList.remove('active');
            document.getElementById('filterNameInput').value = '';
        }
        
        // ç¡®è®¤ä¿å­˜è¿‡æ»¤å™¨
        function confirmSaveFilter() {
            const name = document.getElementById('filterNameInput').value;
            if (!name.trim()) {
                alert('è¯·è¾“å…¥è¿‡æ»¤å™¨åç§°');
                return;
            }
            
            // åˆ›å»ºæ–°çš„è¿‡æ»¤å™¨æ ‡ç­¾
            const tagsContainer = document.getElementById('savedFilters');
            const newTag = document.createElement('div');
            newTag.className = 'filter-tag';
            newTag.onclick = () => loadFilter(name.toLowerCase().replace(/\s+/g, '-'));
            newTag.innerHTML = `
                ${name}
                <span class="remove" onclick="event.stopPropagation(); deleteFilter('${name.toLowerCase().replace(/\s+/g, '-')}')">Ã—</span>
            `;
            tagsContainer.appendChild(newTag);
            
            alert(`è¿‡æ»¤å™¨ "${name}" å·²ä¿å­˜ï¼`);
            closeSaveFilterModal();
        }
        
        // åŠ è½½å·²ä¿å­˜çš„è¿‡æ»¤å™¨
        function loadFilter(filterName) {
            // æ¸…é™¤å…¶ä»–è¿‡æ»¤å™¨çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.classList.remove('active');
            });
            
            // æ¿€æ´»å½“å‰è¿‡æ»¤å™¨
            event.target.classList.add('active');
            
            // æ ¹æ®è¿‡æ»¤å™¨åç§°åŠ è½½ç›¸åº”çš„æ¡ä»¶
            const presetFilters = {
                'active-users': {
                    field: 'status',
                    condition: 'equals',
                    value: 'å¯ç”¨'
                },
                'admin-roles': {
                    field: 'role',
                    condition: 'contains',
                    value: 'ç®¡ç†å‘˜'
                },
                'recent-users': {
                    field: 'created_at',
                    condition: 'greater_than',
                    value: '2024-01-01'
                }
            };
            
            const filter = presetFilters[filterName];
            if (filter) {
                // åº”ç”¨é¢„è®¾è¿‡æ»¤å™¨é€»è¾‘
                alert(`å·²åŠ è½½è¿‡æ»¤å™¨: ${filterName}\nå­—æ®µ: ${filter.field}\næ¡ä»¶: ${filter.condition}\nå€¼: ${filter.value}`);
            }
        }
        
        // åˆ é™¤å·²ä¿å­˜çš„è¿‡æ»¤å™¨
        function deleteFilter(filterName) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè¿‡æ»¤å™¨å—ï¼Ÿ')) {
                event.target.closest('.filter-tag').remove();
                alert(`è¿‡æ»¤å™¨å·²åˆ é™¤: ${filterName}`);
            }
        }
        
        // æ˜¾ç¤ºè‡ªå®šä¹‰æ’åºæ¨¡æ€æ¡†
        function showSortModal() {
            alert('è‡ªå®šä¹‰æ’åºåŠŸèƒ½\n\næ”¯æŒçš„æ’åºå­—æ®µ:\n- ç”¨æˆ·å\n- é‚®ç®±\n- è§’è‰²\n- çŠ¶æ€\n- åˆ›å»ºæ—¶é—´\n- æœ€åç™»å½•æ—¶é—´\n\nå¯ä»¥è®¾ç½®å¤šçº§æ’åºå’Œå‡åº/é™åºã€‚');
        }
        
        // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
        document.getElementById('saveFilterModal').onclick = function(e) {
            if (e.target === this) {
                closeSaveFilterModal();
            }
        };
    </script>
</body>
</html>